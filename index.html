<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6JTGMLLK8S"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-6JTGMLLK8S');
    </script>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/beercss@3.8.0/dist/cdn/beer.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <script type="module" src="https://cdn.jsdelivr.net/npm/beercss@3.8.0/dist/cdn/beer.min.js"></script>

    <script type="module"
        src="https://cdn.jsdelivr.net/npm/material-dynamic-colors@1.1.2/dist/cdn/material-dynamic-colors.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel='stylesheet'
        href='https://cdn-uicons.flaticon.com/2.0.0/uicons-bold-straight/css/uicons-bold-straight.css'>
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.0.0/uicons-bold-rounded/css/uicons-bold-rounded.css'>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=translate" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Roboto+Mono:wght@400;500;700&family=Roboto+Serif:wght@400;500;700&display=swap"
        rel="stylesheet">



    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel='stylesheet'
        href='https://cdn-uicons.flaticon.com/2.1.0/uicons-solid-rounded/css/uicons-solid-rounded.css'>
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.1.0/uicons-brands/css/uicons-brands.css'>
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css" />

    <link rel="icon" href="./icon/favicon.ico" sizes="any">
    <link rel="apple-touch-icon" href="./icon/icon-512.png">

    <meta name="description" content="Un cliente de YouTube Music con Material Design 3, para Android">
    <title>OpenTune</title>

</head>

<body>
    <header id="header"
        class="beer-nav beer-shadow beer-rounded beer-position-fixed beer-top-0 beer-left-0 beer-right-0 beer-transition-all beer-duration-300">
        <nav class="beer-flex beer-items-center beer-justify-between beer-px-4 beer-py-2 beer-flex-wrap">
            <!-- Título centrado -->

            <!-- Asegúrate de tener la imagen y el contenedor correctos -->
            <center>
                <img id="logo" class="logo" src="./icon/icon-512-maskable.png" alt="Logo" width="40">
            </center>


            <button id="languageSelector"
                class="beer-btn beer-btn-secondary beer-flex beer-items-center beer-space-x-2 beer-mr-4 beer-rounded">
                <span id="languageText">Español</span>
                <i class="material-icons">arrow_drop_down</i>
            </button>

            <!-- Selector de tema (lado derecho) -->
            <button id="themeSelector"
                class="transparent circle beer-flex beer-items-center beer-space-x-2 beer-rounded-full beer-shadow-md beer-transition-all hover:beer-bg-neutral-200 dark:hover:beer-bg-neutral-700 beer-px-2">
                <i class="material-icons-outlined" id="themeIcon">brightness_6</i>
            </button>
        </nav>
    </header>

    <dialog id="languageDialog">
        <main>
            <center>
                <ul>
                    <li><button class="beer-btn beer-btn-secondary" onclick="setLanguage('Español', 'index.html')">
                            <img src="https://flagicons.lipis.dev/flags/4x3/es.svg" alt="Español"
                                style="width: 20px; height: auto; margin-right: 8px;"> Español
                        </button></li>
                    <br>
                    <li><button class="beer-btn beer-btn-secondary" onclick="setLanguage('English', 'en.html')">
                            <img src="https://flagicons.lipis.dev/flags/4x3/gb.svg" alt="English"
                                style="width: 20px; height: auto; margin-right: 8px;"> English
                        </button></li>
                    <br>
                    <li><button class="beer-btn beer-btn-secondary" onclick="setLanguage('Português', 'Pt_BR.html')">
                            <img src="https://flagicons.lipis.dev/flags/4x3/br.svg" alt="Português"
                                style="width: 20px; height: auto; margin-right: 8px;"> Português
                        </button></li>
                    <br>
                </ul>
            </center>
        </main>
        <footer>
            <button class="beer-btn beer-btn-secondary" onclick="closeDialog()">Cerrar</button>
        </footer>
    </dialog>

    





    <!-- Hero Section -->
    <section class="hero">
        <img src="./img/mock.png" width="350" alt="">
        <h1>OpenTune</h1>


        <center>
            <a href="https://g.dev/Arturo254"><button class="chip fill">
                    <i>code</i>
                    <span>Dev By Arthur Dev Studio</span>
                </button></a>
        </center>


        <p>Un cliente de YouTube Music con Material Design 3, para Android.</p>
        <div style="display: flex; gap: 10px;">
            <a href="#downloadapk">
                <button class="primary cta"> <i>download</i> Descargar</button>
            </a>
            <button id="triggerDialogButton"> <i>play_circle</i> Probar Demo</button>
        </div>

        <br>
    </section>

    <!-- Features Section -->
    <section>
        <center>
            <h2 class="text-3xl text-center mt-10">
                Características
                <span class="material-symbols-rounded">star</span>
            </h2>
        </center>
        <br>
        <div class="cards">
            <article>
                <h5><span class="material-symbols-rounded mr-2">music_note</span> Cliente de YouTube Music con Material
                    Design 3</h5>
                <p>Ofrece una experiencia moderna y elegante de YouTube Music en Android, con una interfaz intuitiva y
                    optimizada según Material Design 3.</p>
            </article>

            <article>
                <h5><span class="material-symbols-rounded mr-2">palette</span> Diseño Moderno y Atractivo</h5>
                <p>Basado en Material Design 3, con colores vivos, tipografía moderna y transiciones suaves, creando una
                    experiencia estética y atractiva.</p>
            </article>

            <article>
                <h5><span class="material-symbols-rounded mr-2">settings</span> Interfaz Intuitiva y Personalizable</h5>
                <p>Interfaz simplificada para un acceso rápido a todas las funciones de YouTube Music, con opciones de
                    personalización según preferencias.</p>
            </article>

            <article>
                <h5><span class="material-symbols-rounded mr-2">search</span> Explora y Descubre Música</h5>
                <p>Acceso a un amplio catálogo musical con búsqueda avanzada y recomendaciones inteligentes basadas en
                    preferencias y hábitos de escucha.</p>
            </article>

            <article>
                <h5><span class="material-symbols-rounded mr-2">volume_up</span> Reproducción de Alta Calidad</h5>
                <p>Música de alta calidad, optimizada para diferentes dispositivos y condiciones de red, con soporte
                    para varios formatos de audio.</p>
            </article>

            <article>
                <h5><span class="material-symbols-rounded mr-2">playlist_add</span> Listas de Reproducción y Descargas
                </h5>
                <p>Crea y organiza listas de reproducción, y descarga canciones y álbumes para escuchar sin conexión.
                </p>
            </article>

            <article>
                <h5><span class="material-symbols-rounded mr-2">sync</span> Integración Completa con YouTube Music</h5>
                <p>Sincroniza tu cuenta de YouTube Music para acceder a tus bibliotecas y recibir notificaciones sobre
                    lanzamientos y eventos.</p>
            </article>

            <article>
                <h5><span class="material-symbols-rounded mr-2">build</span> Funcionalidades Avanzadas</h5>
                <p>Control de reproducción con voz, gestos y soporte para Chromecast y Bluetooth, permitiendo transmitir
                    a dispositivos externos.</p>
            </article>

            <article>
                <h5><span class="material-symbols-rounded mr-2">folder</span> Gestión Eficiente de la Biblioteca</h5>
                <p>Organiza tu música con herramientas avanzadas de filtrado y categorización, accediendo rápido a
                    canciones y álbumes.</p>
            </article>

            <article>
                <h5><span class="material-symbols-rounded mr-2">translate</span> Soporte Multilingüe</h5>
                <p>Disponible en varios idiomas con traducciones precisas y localización culturalmente relevante.</p>
            </article>

            <article>
                <h5><span class="material-symbols-rounded mr-2">update</span> Actualizaciones y Mejoras Continuas</h5>
                <p>Actualizaciones regulares para nuevas funciones, mejoras de seguridad y optimización del rendimiento.
                </p>
            </article>

            <article>
                <h5><span class="material-symbols-rounded mr-2">headphones</span> Experiencia de Usuario Optimizada</h5>
                <p>Navegación intuitiva y un rendimiento ágil, con una interfaz amigable que mejora la experiencia de
                    usuario.</p>
            </article>
        </div>
    </section>




    <br>
    <br>

    <center>
        <a href="./from.html"><button> <i>play_circle</i> Enviar Solicitud o repotar problema</button></a>

        <div class="overlay blur" id="dialogOverlay"></div>

        <dialog id="warningDialog">
            <h5> <i>Warning</i> &nbsp;Aviso de Redirección</h5>
            <div>Serás redirigido fuera de OpenTune Web</div>
            <nav class="right-align no-space">
                <button class="transparent link" id="dismissButton">Cancelar</button>
                <button class="transparent link" id="proceedButton">Confirmar</button>
            </nav>
        </dialog>



    </center>


    <br>
    <br>
    <center>


        <!-- Downloads Section -->
        <section id="downloadapk">
            <center>
                <h2 class="text-3xl text-center mt-10">Descargas <i
                        class="material-icons left text-3xl text-center mt-10">download</i></h2>
            </center>
            <br>


            <center>

                <article>
                    <div class="card small">
                        <div>
                            <div class="col s12">
                                <center>
                                    <div class="header">
                                        <h5 class="title">
                                            <i class="material-icons left">android</i> Android
                                        </h5>
                                        <p class="small">OpenTune para Android. Descarga la última versión estable.</p>
                                    </div>
                                    <div class="content">
                                        <div class="chip success small m-top-1">Versión Estable</div>
                                        <div id="currentVersion" class="chip small m-top-1">Cargando...</div>
                                    </div>

                                    <br>
                                    <div class="action-bar m-top-1">
                                        <button class="button small" onclick="changelog.show()">
                                            <i class="material-icons">list</i> Cambios
                                        </button>
                                        <br>
                                        <br>
                                        <button class="button small" onclick="versions.show()">
                                            <i class="material-icons">history</i> Versiones
                                        </button>
                                        <br>
                                        <br>
                                        <a id="downloadBtn" class="button filled primary small m-top-2" href=""
                                            download>
                                            <i class="material-icons">download</i> <span id="downloadText">Descargar
                                                APK</span>
                                        </a>
                                    </div>
                                </center>
                            </div>
                        </div>
                    </div>
                </article>

                </div>


                <!-- Changelog Dialog -->
                <dialog id="changelog">
                    <nav>
                        <h5>Notas de la versión</h5>
                        <button class="transparent circle" onclick="changelog.close()">
                            <i class="material-icons">close</i>
                        </button>

                    </nav>
                    <main>
                        <article>
                            <div id="changelogContent" class="content">
                                <div class="progress">
                                    <div class="indeterminate"></div>
                                </div>
                            </div>
                        </article>
                    </main>
                    <footer>
                        <button class="button" onclick="changelog.close()">Cerrar</button>
                    </footer>
                </dialog>

                <!-- Versions Dialog -->
                <dialog id="versions" class="medium">
                    <nav>
                        <h5>Versiones</h5>
                        <button class="transparent circle" onclick="versions.close()">
                            <i class="material-icons">close</i>
                        </button>

                    </nav>
                    <main>
                        <article>
                            <div id="versionsList" class="content">
                                <div class="progress">
                                    <div class="indeterminate"></div>
                                </div>
                            </div>
                        </article>
                    </main>
                    <footer>
                        <button class="button" onclick="versions.close()">Cerrar</button>
                    </footer>
                </dialog>



                <br>
                <br>

                <article>
                    <div>
                        <div>
                            <div class="col s12 m8">
                                <div class="header">
                                    <h5 class="title">
                                        <i class="material-icons left">laptop_windows</i> Windows
                                    </h5>
                                    <p>OpenTune para Windows. Descarga la última versión estable.</p>
                                </div>
                                <div class="content">
                                    <div class="chip success small m-top-2">Versión Estable</div>
                                    <div id="currentVersionWindows" class="chip small m-top-2">Cargando...</div>
                                </div>

                                <br>
                                <div class="action-bar m-top-2">
                                    <button class="button small" onclick="showChangelogWindows()">
                                        <i class="material-icons">list</i> Cambios
                                    </button>
                                    <br>
                                    <br>
                                    <button class="button small" onclick="showVersionsWindows()">
                                        <i class="material-icons">history</i> Versiones
                                    </button>
                                    <br>
                                    <br>
                                    <a id="downloadBtnWindows" class="button filled primary small m-top-2" href=""
                                        download>
                                        <i class="material-icons">download</i> Descargar EXE
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </article>

                <!-- Changelog Dialog for Windows -->
                <dialog id="changelogWindows">
                    <nav>
                        <h5>Notas de la versión</h5>
                        <button class="transparent circle" onclick="closeChangelogWindows()">
                            <i class="material-icons">close</i>
                        </button>

                    </nav>
                    <main>
                        <article>
                            <div id="changelogContentWindows" class="content markdown">
                                <div class="progress">
                                    <div class="indeterminate"></div>
                                </div>
                            </div>
                        </article>
                    </main>
                    <footer>
                        <button class="button" onclick="closeChangelogWindows()">Cerrar</button>
                    </footer>
                </dialog>

                <!-- Versions Dialog for Windows -->
                <dialog id="versionsWindows">
                    <nav>
                        <h5>Versiones </h5>
                        <button class="transparent circle" onclick="closeVersionsWindows()">
                            <i class="material-icons">close</i>
                        </button>

                    </nav>
                    <main>
                        <article>
                            <div id="versionsListWindows" class="content">
                                <div class="progress">
                                    <div class="indeterminate"></div>
                                </div>
                            </div>
                        </article>
                    </main>
                    <footer>
                        <button class="button" onclick="closeVersionsWindows()">Cerrar</button>
                    </footer>
                </dialog>





            </center>





        </section>
        <br>
        <br>
        <center>


            <footer class="beer-footer beer-bg-light beer-shadow beer-rounded beer-m-4">
                <div class="container mx-auto p-4 md:py-8">
                    <br>

                    <div class="sm:flex sm:items-center sm:justify-between mt-4">
                        <div class="flex flex-wrap justify-center gap-4">
                            <a href="https://github.com/Arturo254/" class="chip round beer-btn beer-btn-primary">
                                <i class="primary-text">developer_mode</i>
                                <span>Dev</span>
                            </a>
                            <br>
                            <br>
                            <a href="https://github.com/Arturo254/OpenTune"
                                class="chip round beer-btn beer-btn-primary">
                                <i class="primary-text">code</i>
                                <span>Project Code</span>
                            </a>
                            <br>
                            <br>
                            <a href="https://raw.githubusercontent.com/Arturo254/OpenTune/master/LICENSE"
                                class="chip round beer-btn beer-btn-primary">
                                <i class="primary-text">description</i>
                                <span>Licensing</span>
                            </a>
                            <br>
                            <br>
                            <a href="https://wa.me/5576847925" class="chip round beer-btn beer-btn-primary">
                                <i class="primary-text">phone_in_talk</i>
                                <span>Contact</span>
                            </a>
                            <br>
                            <br>
                            <a href="./contribuidores.html" class="chip round beer-btn beer-btn-primary">
                                <i class="primary-text">groups</i>
                                <span>Contribuidores</span>
                            </a>
                            <br>
                            <br>
                        </div>
                    </div>

                    <hr class="my-6 beer-border-gray-200 sm:mx-auto beer-border-darkgray lg:my-8" />

                    <div class="text-center">
                        <span class="block text-sm text-gray-500 sm:text-center dark:text-gray-400">
                            © 2024 <a href="https://github.com/Arturo254" class="hover:underline">Arturo.inc™</a>. All
                            Rights Reserved.
                        </span>
                    </div>
                </div>
            </footer>
        </center>



        <!-- Beer CSS Styles -->
        <style>
            .carousel-container {
                display: flex;
                justify-content: center;
                flex-wrap: wrap;
                gap: 10px;
            }

            .carousel-image {
                width: 100px;
                height: 100px;
                object-fit: cover;
                cursor: pointer;
                transition: transform 0.3s ease;
                border: none;
            }

            .carousel-image:hover {
                transform: scale(1.1);
            }

            .popup-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: rgba(0, 0, 0, 0.7);
                justify-content: center;
                align-items: center;
                overflow: hidden;
            }

            .popup-content {
                position: relative;
                padding: 20px;
                border-radius: 10px;
            }

            .popup-image {
                max-width: 90%;
                max-height: 90vh;
                object-fit: contain;
                display: block;
                margin: 0 auto;
            }

            .close-popup {
                position: absolute;
                top: 10px;
                right: 10px;
                font-size: 30px;
                cursor: pointer;
            }

            .carousel {
                border-radius: 15px;

            }

            header {
                border-radius: 12px;
                /* Redondeo del header */
                overflow: hidden;


            }

            nav {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 10px 20px;
            }

            .hero {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                text-align: center;
                padding: 20px;
            }

            .hero h1 {
                font-size: 3rem;
                margin-bottom: 1rem;
            }

            .hero p {
                font-size: 1.2rem;
                margin-bottom: 2rem;
            }

            .hero .cta {
                font-size: 1.1rem;
            }

            .cards {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
                padding: 20px;
            }

            .carousel {
                display: flex;
                overflow-x: auto;
                gap: 20px;
                padding: 20px;
                scroll-snap-type: x mandatory;
            }

            .carousel img {
                flex: 0 0 auto;
                width: 300px;
                height: auto;
                border-radius: 8px;
                scroll-snap-align: center;
            }

            .downloads {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
                padding: 20px;
            }

            .footer {
                background: #333;
                color: white;
                text-align: center;
                padding: 20px;
            }

            /* Aplicar la fuente Roboto como fuente predeterminada */
            body {
                font-family: 'Roboto', sans-serif;
                font-weight: 400;
                /* Peso predeterminado */
                line-height: 1.5;
                /* Altura de línea para mejor legibilidad */
                margin: 0;
                padding: 0;
            }

            /* Estilos para encabezados */
            h1,
            h2,
            h3,
            h4,
            h5,
            h6 {
                font-family: 'Roboto', sans-serif;
                font-weight: 700;
                /* Usar peso negrita para encabezados */
                line-height: 1.25;
                margin: 0;
            }

            /* Estilo para texto en código o consola */
            code,
            pre {
                font-family: 'Roboto Mono', monospace;
                font-weight: 400;
            }

            /* Estilo opcional para citas o textos destacados */
            blockquote {
                font-family: 'Roboto Serif', serif;
                font-style: italic;
                font-weight: 400;
                color: #555;
                /* Color gris para diferenciar */
                border-left: 4px solid #ccc;
                padding-left: 10px;
                margin: 10px 0;
            }

            /* Asegurar compatibilidad con Material Symbols */
            .material-symbols-rounded {
                font-family: 'Material Symbols Rounded';
                font-weight: 400;
                font-style: normal;
                display: inline-block;
                line-height: 1;
                text-transform: none;
                white-space: nowrap;
                word-wrap: normal;
                direction: ltr;
                -webkit-font-smoothing: antialiased;
            }

            .chip.fill {
                position: relative;
                overflow: hidden;
            }

            .chip.fill::before {
                content: "";
                position: absolute;
                top: 0;
                left: -150%;
                width: 200%;
                height: 100%;
                background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.2), transparent);
                animation: shine 5s infinite ease-in-out;
            }

            @keyframes shine {
                0% {
                    left: -150%;
                }

                50% {
                    left: -50%;
                }

                100% {
                    left: 150%;
                }
            }

            /* Efecto aleatorio */
            .chip.fill {
                animation: delay-animation 10s infinite;
            }

            @keyframes delay-animation {

                0%,
                20% {
                    opacity: 1;
                }

                21%,
                100% {
                    opacity: 1;
                    /* Controla cuándo el brillo se muestra */
                }
            }
            .logo {
                    animation: logoGlow 4s ease-in-out infinite;
                    filter: brightness(1.1);
                    /* Brillo base */
                    transition: transform 0.3s ease, opacity 0.3s ease, box-shadow 0.3s ease;
                    border-radius: 40%;
                }

                @keyframes logoGlow {
                    0% {
                        opacity: 0.8;
                        filter: brightness(1.1);
                        /* Brillo inicial */
                        box-shadow: 0 0 10px var(--logo-glow-color, rgba(255, 255, 255, 0.5));
                        /* Resplandor suave */
                    }

                    50% {
                        opacity: 1;
                        filter: brightness(1.3);
                        /* Aumenta ligeramente el brillo */
                        box-shadow: 0 0 20px var(--logo-glow-color, rgba(255, 255, 255, 0.8)), 0 0 30px var(--logo-glow-color, rgba(255, 255, 255, 0.6));
                        /* Brillo más intenso */
                    }

                    100% {
                        opacity: 0.8;
                        filter: brightness(1.1);
                        /* Vuelve al brillo inicial */
                        box-shadow: 0 0 10px var(--logo-glow-color, rgba(255, 255, 255, 0.5));
                        /* Resplandor suave */
                    }
                }
                .overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 10;
                display: none;
                -webkit-backdrop-filter: blur(10px);
                backdrop-filter: blur(10px);
            }

            dialog {
                z-index: 20;
            }
        </style>

        <script>

            // Esperar a que el DOM esté completamente cargado
            document.addEventListener('DOMContentLoaded', () => {
                initApp();
            });

            /**
             * Inicializa todas las funcionalidades de la aplicación
             */
            function initApp() {
                // Inicializar componentes principales
                initThemeManager();
                initLanguageSelector();
                initDialogs();

                // Inicializar características específicas de OpenTune
                initLogoEffects();
                initVersionCheckers();
                initCarouselPopup();
            }

            /**
             * Inicializa la gestión del tema (claro/oscuro)
             */
            function initThemeManager() {
                const themeSelector = document.getElementById('themeSelector');
                const themeIcon = document.getElementById('themeIcon');

                if (!themeSelector || !themeIcon) return;

                // Detecta la preferencia de tema del sistema
                function detectThemePreference() {
                    const themePreference = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
                    document.body.classList.add(themePreference);
                    localStorage.setItem('theme', themePreference);
                    updateThemeIcon(themePreference);
                }

                // Actualiza el icono según el tema
                function updateThemeIcon(theme) {
                    themeIcon.textContent = theme === 'dark' ? 'light_mode' : 'brightness_6';
                }

                // Alternar entre temas manualmente
                themeSelector.addEventListener('click', () => {
                    if (document.body.classList.contains('dark')) {
                        document.body.classList.remove('dark');
                        localStorage.setItem('theme', 'light');
                        updateThemeIcon('light');
                    } else {
                        document.body.classList.add('dark');
                        localStorage.setItem('theme', 'dark');
                        updateThemeIcon('dark');
                    }
                });

                // Cargar tema guardado o detectar preferencia del sistema
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme) {
                    if (savedTheme === 'dark') {
                        document.body.classList.add('dark');
                    } else {
                        document.body.classList.remove('dark');
                    }
                    updateThemeIcon(savedTheme);
                } else {
                    detectThemePreference();
                }
            }

            /**
             * Inicializa el selector de idioma
             */
            function initLanguageSelector() {
                const languageSelector = document.getElementById('languageSelector');
                const languageDialog = document.getElementById('languageDialog');

                if (!languageSelector || !languageDialog) return;

                // Abrir diálogo de selección de idioma
                languageSelector.addEventListener('click', () => {
                    languageDialog.showModal();
                });

                // Configurar función global para cerrar diálogo
                window.closeDialog = () => {
                    languageDialog.close();
                };

                // Configurar función global para establecer idioma
                window.setLanguage = (language, url) => {
                    const languageText = document.getElementById('languageText');
                    if (languageText) {
                        languageText.textContent = language;
                    }
                    closeDialog();
                    window.location.href = url;
                };
            }

            /**
             * Inicializa todos los diálogos de la aplicación
             */
            function initDialogs() {
                // Diálogo de advertencia
                initWarningDialog();

                // Diálogos de Android
                initAndroidDialogs();

                // Diálogos de Windows
                initWindowsDialogs();
            }

            /**
             * Inicializa el diálogo de advertencia para redirecciones
             */
            function initWarningDialog() {
                const triggerDialogButton = document.getElementById('triggerDialogButton');
                const warningDialog = document.getElementById('warningDialog');
                const dialogOverlay = document.getElementById('dialogOverlay');
                const dismissButton = document.getElementById('dismissButton');
                const proceedButton = document.getElementById('proceedButton');

                if (!triggerDialogButton || !warningDialog || !dialogOverlay) return;

                // Abrir diálogo de advertencia
                triggerDialogButton.addEventListener('click', () => {
                    warningDialog.showModal();
                    dialogOverlay.style.display = 'block';
                });

                // Cerrar diálogo
                if (dismissButton) {
                    dismissButton.addEventListener('click', () => {
                        warningDialog.close();
                        dialogOverlay.style.display = 'none';
                    });
                }

                // Proceder con la redirección
                if (proceedButton) {
                    proceedButton.addEventListener('click', () => {
                        window.location.href = "https://appetize.io/app/b_dfzx6aiin4tiita4axmxt4yze4";
                    });
                }
            }

            /**
             * Inicializa los diálogos relacionados con OpenTune Android
             */
            function initAndroidDialogs() {
                // Configurar objetos para manejar los diálogos
                window.changelog = {
                    element: document.getElementById('changelog'),
                    show: function () {
                        if (!this.element) return;
                        this.element.showModal();
                        this.loadChangelog();
                    },
                    close: function () {
                        if (!this.element) return;
                        this.element.close();
                    },
                    async loadChangelog() {
                        const content = document.getElementById('changelogContent');
                        if (!content) return;

                        try {
                            const response = await fetch('https://api.github.com/repos/Arturo254/OpenTune/releases/latest');
                            if (!response.ok) {
                                throw new Error(`Error de API: ${response.status}`);
                            }

                            const data = await response.json();
                            if (!data.body) {
                                throw new Error('No se encontraron notas disponibles');
                            }

                            content.innerHTML = `
          <div class="card">
            <div class="header">
              <div class="title">Versión ${data.tag_name}</div>
              <div class="subtitle">${new Date(data.published_at).toLocaleDateString()}</div>
            </div>
            <div class="content markdown">
              ${marked.parse(data.body)}
            </div>
          </div>
        `;
                        } catch (error) {
                            console.error('Error al cargar el changelog:', error);
                            content.innerHTML = `<div class="error-text">Error cargando los cambios: ${error.message}</div>`;
                        }
                    }
                };

                window.versions = {
                    element: document.getElementById('versions'),
                    show: function () {
                        if (!this.element) return;
                        this.element.showModal();
                        this.loadVersions();
                    },
                    close: function () {
                        if (!this.element) return;
                        this.element.close();
                    },
                    async loadVersions() {
                        const list = document.getElementById('versionsList');
                        if (!list) return;

                        try {
                            const response = await fetch('https://api.github.com/repos/Arturo254/OpenTune/releases');
                            if (!response.ok) {
                                throw new Error(`Error de API: ${response.status}`);
                            }

                            const releases = await response.json();

                            list.innerHTML = releases.map(release => `
          <div class="card m-bottom-2">
            <div class="header">
              <div class="title">${release.tag_name}</div>
              <div class="subtitle">${new Date(release.published_at).toLocaleDateString()}</div>
            </div>
            <div class="action-bar">
              <a href="${release.assets[0]?.browser_download_url || '#'}" class="button">
                <i class="material-icons">download</i> Descargar
              </a>
            </div>
          </div>
        `).join('');
                        } catch (error) {
                            console.error('Error al cargar las versiones:', error);
                            list.innerHTML = `<div class="error-text">Error cargando las versiones: ${error.message}</div>`;
                        }
                    }
                };
            }

            /**
             * Inicializa los diálogos relacionados con OpenTune Windows
             */
            function initWindowsDialogs() {
                // Funciones para mostrar y cerrar los diálogos de Windows
                window.showChangelogWindows = function () {
                    const changelogElement = document.getElementById('changelogWindows');
                    if (!changelogElement) return;

                    changelogElement.showModal();
                    loadChangelogWindows();
                };

                window.closeChangelogWindows = function () {
                    const changelogElement = document.getElementById('changelogWindows');
                    if (!changelogElement) return;

                    changelogElement.close();
                };

                window.showVersionsWindows = function () {
                    const versionsElement = document.getElementById('versionsWindows');
                    if (!versionsElement) return;

                    versionsElement.showModal();
                    loadVersionsWindows();
                };

                window.closeVersionsWindows = function () {
                    const versionsElement = document.getElementById('versionsWindows');
                    if (!versionsElement) return;

                    versionsElement.close();
                };

                // Funciones para cargar datos en los diálogos de Windows
                async function loadChangelogWindows() {
                    const content = document.getElementById('changelogContentWindows');
                    if (!content) return;

                    try {
                        const response = await fetch('https://api.github.com/repos/Arturo254/OpenTune-Desktop/releases/latest');
                        if (!response.ok) {
                            throw new Error(`Error de API: ${response.status}`);
                        }

                        const data = await response.json();

                        content.innerHTML = `
        <div class="card">
          <div class="header">
            <div class="title">Versión ${data.tag_name}</div>
            <div class="subtitle">${new Date(data.published_at).toLocaleDateString()}</div>
          </div>
          <div class="content markdown">
            ${marked.parse(data.body || 'No hay notas disponibles')}
          </div>
        </div>
      `;
                    } catch (error) {
                        console.error('Error al cargar el changelog de Windows:', error);
                        content.innerHTML = `<div class="error-text">Error cargando los cambios: ${error.message}</div>`;
                    }
                }

                async function loadVersionsWindows() {
                    const list = document.getElementById('versionsListWindows');
                    if (!list) return;

                    try {
                        const response = await fetch('https://api.github.com/repos/Arturo254/OpenTune-Desktop/releases');
                        if (!response.ok) {
                            throw new Error(`Error de API: ${response.status}`);
                        }

                        const releases = await response.json();

                        list.innerHTML = releases.map(release => `
        <div class="card m-bottom-2">
          <div class="header">
            <div class="title">${release.tag_name}</div>
            <div class="subtitle">${new Date(release.published_at).toLocaleDateString()}</div>
          </div>
          <div class="action-bar">
            <a href="${release.assets[0]?.browser_download_url || '#'}" class="button">
              <i class="material-icons">download</i> Descargar
            </a>
          </div>
        </div>
      `).join('');
                    } catch (error) {
                        console.error('Error al cargar las versiones de Windows:', error);
                        list.innerHTML = `<div class="error-text">Error cargando las versiones: ${error.message}</div>`;
                    }
                }
            }

            /**
             * Inicializa los efectos del logo
             */
            function initLogoEffects() {
                const logo = document.getElementById('logo');
                if (!logo) return;

                // Función para aplicar efectos al logo basados en sus colores
                logo.addEventListener('load', () => {
                    try {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        const img = new Image();
                        img.crossOrigin = "Anonymous"; // Para evitar errores CORS
                        img.src = logo.src;

                        img.onload = () => {
                            // Establecer dimensiones del canvas
                            canvas.width = img.width;
                            canvas.height = img.height;

                            // Dibujar imagen en el canvas
                            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

                            try {
                                // Obtener datos de los píxeles
                                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                                const pixels = imageData.data;

                                // Variables para acumular colores
                                let r = 0, g = 0, b = 0, total = 0;

                                // Calcular color promedio
                                for (let i = 0; i < pixels.length; i += 4) {
                                    r += pixels[i];
                                    g += pixels[i + 1];
                                    b += pixels[i + 2];
                                    total++;
                                }

                                r = Math.floor(r / total);
                                g = Math.floor(g / total);
                                b = Math.floor(b / total);

                                // Aplicar color de resplandor
                                const glowColor = `rgb(${r}, ${g}, ${b})`;
                                logo.style.setProperty('--logo-glow-color', glowColor);
                            } catch (e) {
                                console.error('Error al procesar la imagen del logo:', e);
                                // Aplicar un color de resplandor predeterminado
                                logo.style.setProperty('--logo-glow-color', 'rgba(255, 255, 255, 0.5)');
                            }
                        };

                        img.onerror = () => {
                            console.error('No se pudo cargar la imagen del logo');
                            // Aplicar un color de resplandor predeterminado
                            logo.style.setProperty('--logo-glow-color', 'rgba(255, 255, 255, 0.5)');
                        };
                    } catch (e) {
                        console.error('Error al inicializar efectos del logo:', e);
                    }
                });
            }

            /**
             * Inicializa los verificadores de versión para Android y Windows
             */
            function initVersionCheckers() {
                // Configuración de versiones
                const versionConfig = {
                    android: {
                        currentVersion: '1.9.6',
                        latestVersion: '1.9.6',
                        repo: 'Arturo254/OpenTune',
                        downloadElement: 'downloadBtn',
                        textElement: 'downloadText',
                        versionElement: 'currentVersion',
                        downloadFormat: '{version}/app-release.apk'
                    },
                    windows: {
                        currentVersion: '1.9.0',
                        latestVersion: '1.9.0',
                        repo: 'Arturo254/OpenTune-Desktop',
                        downloadElement: 'downloadBtnWindows',
                        textElement: 'downloadTextWindows',
                        versionElement: 'currentVersionWindows',
                        downloadFormat: '{version}/OpenTune-Desktop-{version}.exe'
                    }
                };

                // Inicializar verificadores para cada plataforma
                Object.keys(versionConfig).forEach(platform => {
                    initVersionChecker(platform, versionConfig[platform]);
                });
            }

            /**
             * Inicializa un verificador de versión para una plataforma específica
             * @param {string} platform - La plataforma (android o windows)
             * @param {object} config - La configuración para la plataforma
             */
            async function initVersionChecker(platform, config) {
                const versionElement = document.getElementById(config.versionElement);
                const downloadBtn = document.getElementById(config.downloadElement);
                const downloadText = document.getElementById(config.textElement);

                if (!versionElement && !downloadBtn) return;

                /**
                 * Verifica si hay una nueva versión disponible
                 */
                async function checkNewVersion() {
                    try {
                        const response = await fetch(`https://api.github.com/repos/${config.repo}/releases/latest`);
                        if (!response.ok) {
                            throw new Error(`Error al verificar la versión de ${platform}: ${response.status}`);
                        }

                        const data = await response.json();
                        config.latestVersion = data.tag_name;

                        // Actualizar elemento de versión si existe
                        if (versionElement) {
                            versionElement.textContent = data.tag_name;
                        }

                        // Actualizar botón de descarga si existe
                        updateDownloadButton();

                        return data.tag_name;
                    } catch (error) {
                        console.error(`Error al verificar versión de ${platform}:`, error);
                        if (versionElement) {
                            versionElement.textContent = 'Error al obtener versión';
                        }
                        return null;
                    }
                }

                /**
                 * Actualiza el botón de descarga con la URL correcta
                 */
                function updateDownloadButton() {
                    if (!downloadBtn) return;

                    const version = config.latestVersion || config.currentVersion;
                    const downloadUrl = `https://github.com/repos/${config.repo}/releases/download/${config.downloadFormat.replace(/\{version\}/g, version)}`;

                    downloadBtn.href = downloadUrl;

                    if (downloadText && config.latestVersion !== config.currentVersion) {
                        downloadText.textContent = 'Nueva versión disponible!';
                    }
                }

                // Verificar al cargar la página
                await checkNewVersion();

                // Verificar periódicamente (cada hora)
                setInterval(checkNewVersion, 60 * 60 * 1000);
            }

            /**
             * Inicializa la funcionalidad del popup del carrusel
             */
            function initCarouselPopup() {
                const images = document.querySelectorAll('.carousel-image');
                const popupOverlay = document.getElementById('popupOverlay');

                if (!images.length || !popupOverlay) return;

                const popupImage = document.getElementById('popupImage');
                const closePopup = document.getElementById('closePopup');

                // Abrir popup al hacer clic en una imagen
                images.forEach((image) => {
                    image.addEventListener('click', (e) => {
                        popupImage.src = e.target.src;
                        popupOverlay.style.display = 'flex';
                    });
                });

                // Cerrar popup al hacer clic fuera de la imagen
                popupOverlay.addEventListener('click', (e) => {
                    if (e.target === popupOverlay) {
                        popupOverlay.style.display = 'none';
                    }
                });

                // Cerrar popup con el botón
                if (closePopup) {
                    closePopup.addEventListener('click', () => {
                        popupOverlay.style.display = 'none';
                    });
                }

                // Funcionalidad para deslizar
                let startX;
                popupOverlay.addEventListener('touchstart', (e) => {
                    startX = e.touches[0].clientX;
                });

                popupOverlay.addEventListener('touchend', (e) => {
                    let endX = e.changedTouches[0].clientX;
                    if (startX - endX > 50) {
                        // Deslizar a la izquierda, mostrar siguiente imagen
                        nextImage();
                    } else if (endX - startX > 50) {
                        // Deslizar a la derecha, mostrar imagen anterior
                        prevImage();
                    }
                });

                // Función para mostrar la siguiente imagen
                function nextImage() {
                    let currentIndex = Array.from(images).findIndex((img) => img.src === popupImage.src);
                    let nextIndex = (currentIndex + 1) % images.length;
                    popupImage.src = images[nextIndex].src;
                }

                // Función para mostrar la imagen anterior
                function prevImage() {
                    let currentIndex = Array.from(images).findIndex((img) => img.src === popupImage.src);
                    let prevIndex = (currentIndex - 1 + images.length) % images.length;
                    popupImage.src = images[prevIndex].src;
                }
            }

            // Configuración de marked.js para renderizar correctamente Markdown
            if (typeof marked !== 'undefined') {
                marked.setOptions({
                    breaks: true,      // Permitir saltos de línea simples
                    gfm: true,         // GitHub Flavored Markdown
                    headerIds: false,  // Desactivar IDs automáticos en encabezados
                    sanitize: false    // No sanitizar para permitir HTML
                });
            }
        </script>

</body>

</html>